<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="https://github.com/micahblu/gulp-connect-php#readme"

    >gulp-connect-php (v1.0.0)</a>
</h1>
<h4>Starts a php server</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.gulp-connect-php">module gulp-connect-php</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-connect-php.gulp-connect-php">
            function <span class="apidocSignatureSpan"></span>gulp-connect-php
            <span class="apidocSignatureSpan">(&#x27;server&#x27;)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-connect-php.closeServer">
            function <span class="apidocSignatureSpan">gulp-connect-php.</span>closeServer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.gulp-connect-php.server">
            function <span class="apidocSignatureSpan">gulp-connect-php.</span>server
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">gulp-connect-php.</span>compat</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">gulp-connect-php.</span>OPTIONS_PHP_CLI_ARR</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">gulp-connect-php.</span>OPTIONS_SPAWN_OBJ</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.gulp-connect-php" id="apidoc.module.gulp-connect-php">module gulp-connect-php</a></h1>


    <h2>
        <a href="#apidoc.element.gulp-connect-php.gulp-connect-php" id="apidoc.element.gulp-connect-php.gulp-connect-php">
        function <span class="apidocSignatureSpan"></span>gulp-connect-php
        <span class="apidocSignatureSpan">(&#x27;server&#x27;)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">class PhpDevelopmentServerConnection {
<span class="apidocCodeCommentSpan">  /**
   * Create a new Instance
   * @param opts Default Options. Will be merged with our own internal set of default options. Can be overwridden in the connect
 (&#x27;server&#x27;) call.
   * @returns {PhpDevelopmentServerConnection}
   */
</span>  constructor(opts) {
    //this.counter = ++counter;
    //console.log(`[${this.counter}] constructor`);

    this.status = Status.NEW;

    this.checkServerTries = 0;

    this.workingPort = 8000;

    this.defaults = Object.assign({
      port: 8000,
      hostname: &#x27;127.0.0.1&#x27;,
      base: &#x27;.&#x27;,
      open: false,
      bin: &#x27;php&#x27;,
      root: &#x27;/&#x27;,
      stdio: &#x27;inherit&#x27;,
      configCallback: null,
      debug: false
    }, opts || {});

    return this; // `new` bug
  }

  /**
   * &#x27;Close&#x27;/Shutdown the PHP Development Server
   * @param cb Optional single parameter Callback. Parameter is the return (if any) of the node `ChildProcess.kill(...)` call or
 nothing if not started.
   */
  closeServer(cb) {
    cb = cb || function _closeServerCb_noop() { };
    //console.log(`[${this.counter}] closeServer`);
    const self = this;
    if (this.loading) {
      setTimeout(() =&#x3e; self.closeServer(cb), 5);
      return;
    }

    if (this.childProcess) {
      cb(this.childProcess.kill(&#x27;SIGKILL&#x27;));
      this.status = Status.FINISHED;
      return;
    }

    cb();
  }

  /**
   * Get the port the server is running on.
   * @returns {number|*} Port number.
   */
  get port() { return this.workingPort; }

  /**
   * Start the Server
   * @param options Optional Server Options to overwrite the defaults in the CTor.
   * @param cb Optional Callback for Completion. May pass in an error when there is a fault.
   */
  server(options, cb) {
    //console.log(`[${this.counter}] server`);
    cb = cb || function _serverCB_noop() { };

    const self = this;

    if (this.status !== Status.NEW &#x26;&#x26; this.status !== Status.FINISHED) {
      return cb(new Error(&#x27;You may not start a server that is starting or started.&#x27;));
    }

    options = Object.assign({}, this.defaults, options);

    this.workingPort = options.port;
    const host = options.hostname + &#x27;:&#x27; + options.port;
    const args = [&#x27;-S&#x27;, host, &#x27;-t&#x27;, options.base];

    if (options.ini) {
      args.push(&#x27;-c&#x27;, options.ini);
    }

    if (options.router) {
      args.push(require(&#x27;path&#x27;).resolve(options.router));
    }

    if (options.debug) {
      spawn = function _debugSpawn(outerSpawn) {
        return function debugSpawnWrapper(file, args, options) {
          console.log(&#x27;Invoking Spawn with:&#x27;);
          console.log(file);
          console.log(args);
          console.log(options);

          return outerSpawn(file, args, options);
        }
      }(spawn);
    }

    if (options.configCallback === null || options.configCallback === undefined) {
      options.configCallback = function noOpConfigCallback(type, collection) {
        return collection;
      }
    }

    spawn = function _configCallbackSpawn(outerSpawn) {
      return function configCallbackSpawnWrapper(file, spawnArgs, spawnOptions) {
        return outerSpawn(file, options.configCallback(OPTIONS_PHP_CLI_ARR, spawnArgs) || spawnArgs, options.configCallback(OPTIONS_SPAWN_OBJ
, spawnOptions) || spawnOptions);
      }
    }(spawn);

    binVersionCheck(`&#x22;${options.bin}&#x22;`, &#x27;&#x3e;=5.4&#x27;, function _binVerCheck(err) {
      if (err) {
        cb(err);
        return;
      }
      const checkPath = function _checkPath() {
        const exists = fs.existsSync(options.base);
        if (exists === true) {
          self.status = Status.STARTING;
          self.childProcess = spawn(options.bin, args, {
            cwd: &#x27;.&#x27;,
            stdio: options.stdio
          });
        }
        else {
          setTimeout(checkPath, 100);
        }
      };
      checkPath();
      // check when the server is ready. tried doing it by listening
      // to the child process `data` event, but it&#x27;s not triggered...
      checkServer.call(self, options.hostname, options.port, function _server_checkServer() {
        self.status = Status.STARTED;
        if (option ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-connect-php.closeServer" id="apidoc.element.gulp-connect-php.closeServer">
        function <span class="apidocSignatureSpan">gulp-connect-php.</span>closeServer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">closeServer = function () { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
       * @param cb Optional single parameter Callback. Parameter is the return (if any) of the node `ChildProcess.kill(...)` call
 or nothing if not started.
       */
      closeServer(cb) {
cb = cb || function _closeServerCb_noop() { };
//console.log(`[${this.counter}] closeServer`);
const self = this;
if (this.loading) {
  setTimeout(() =&#x3e; self.<span class="apidocCodeKeywordSpan">closeServer</span>(cb), 5);
  return;
}

if (this.childProcess) {
  cb(this.childProcess.kill(&#x27;SIGKILL&#x27;));
  this.status = Status.FINISHED;
  return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.gulp-connect-php.server" id="apidoc.element.gulp-connect-php.server">
        function <span class="apidocSignatureSpan">gulp-connect-php.</span>server
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">server = function () { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...

### As a Singleton
```js
var gulp = require(&#x27;gulp&#x27;),
    connect = require(&#x27;gulp-connect-php&#x27;);

gulp.task(&#x27;connect&#x27;, function() {
	connect.<span class="apidocCodeKeywordSpan">server</span>();
});

gulp.task(&#x27;default&#x27;, [&#x27;connect&#x27;]);
```

### As an Instance
```js
...</pre></li>
    </ul>








</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
